---
title: "slim-rails 4.0.0ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼šRuby 2.7ã¨Rails 6ä»¥ä¸‹ãŒã‚µãƒãƒ¼ãƒˆçµ‚äº†"
emoji: "ğŸ’"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Rails", "Ruby", "Slim", "ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰"]
published: true
---

## ã¯ã˜ã‚ã«

Gemfileã‚’æ›´æ–°ã—ãŸã‚‰ `slim-rails` ãŒ 3.7.0 ã‹ã‚‰ 4.0.0 ã«ä¸ŠãŒã£ãŸã€‚ä½•ãŒå¤‰ã‚ã£ãŸã®ã‹èª¿ã¹ã¦ã¿ãŸã€‚

```ruby
# å¤‰æ›´å‰
slim-rails (3.7.0)

# å¤‰æ›´å¾Œ
slim-rails (4.0.0)
```

çµè«–ã‹ã‚‰è¨€ã†ã¨ã€**ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã ãŒã€ãƒ¢ãƒ€ãƒ³ãªç’°å¢ƒãªã‚‰å½±éŸ¿ã¯å°‘ãªã„**ã€‚ãŸã ã—ã€å¤ã„ç’°å¢ƒã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã ã€‚

## ä¸»ãªå¤‰æ›´ç‚¹

### 1. ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å¤§å¹…ãªæ•´ç†ï¼ˆç ´å£Šçš„å¤‰æ›´ï¼‰

4.0.0 ã§æœ€ã‚‚å¤§ããªå¤‰æ›´ã¯ã€**ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã®å¼•ãä¸Šã’**ã ã€‚

| é …ç›® | 3.7.0 | 4.0.0 |
|------|-------|-------|
| Ruby | 2.7ä»¥ä¸Š | **3.0ä»¥ä¸Š** |
| Rails | 5.0ä»¥ä¸Š | **7.0ä»¥ä¸Š** |

Ruby 2.7 ã¨ Rails 6 ä»¥ä¸‹ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€slim-rails 3.7.0 ã«å›ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

```ruby
# Rails 6ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®š
gem 'slim-rails', '~> 3.7.0'
```

### 2. Rails Annotations ã‚µãƒãƒ¼ãƒˆã®è¿½åŠ 

`rake notes` ã‚³ãƒãƒ³ãƒ‰ã§ `.slim` ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èªè­˜ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

```slim
/ TODO: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ”¹å–„ã™ã‚‹
.container
  h1 Hello World

/ FIXME: N+1å•é¡Œã‚’è§£æ±ºã™ã‚‹
- @users.each do |user|
  = render partial: 'user', locals: { user: user }
```

ã“ã‚Œã§ `rake notes` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ï¼š

```bash
$ bin/rails notes

app/views/users/index.html.slim:
  * [  1] [TODO] ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ”¹å–„ã™ã‚‹
  * [  5] [FIXME] N+1å•é¡Œã‚’è§£æ±ºã™ã‚‹
```

ERBãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒæ§˜ã«ã€Slimãƒ•ã‚¡ã‚¤ãƒ«å†…ã® `TODO`ã€`FIXME`ã€`OPTIMIZE` ãªã©ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ¤œå‡ºã•ã‚Œã‚‹ã€‚

### 3. CodeStatistics ã‚µãƒãƒ¼ãƒˆã®è¿½åŠ 

`rake stats` ã‚³ãƒãƒ³ãƒ‰ã§ Slim ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

```bash
$ bin/rails stats

+----------------------+--------+--------+---------+---------+-----+-------+
| Name                 |  Lines |    LOC | Classes | Methods | M/C | LOC/M |
+----------------------+--------+--------+---------+---------+-----+-------+
| Controllers          |    500 |    400 |      20 |      80 | 4.0 |   5.0 |
| Models               |    300 |    250 |      15 |      45 | 3.0 |   5.6 |
| Views (Slim)         |    800 |    650 |       0 |       0 | 0.0 |   0.0 |
+----------------------+--------+--------+---------+---------+-----+-------+
```

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ã‚³ãƒ¼ãƒ‰é‡ã‚’æŠŠæ¡ã™ã‚‹éš›ã«ã€Slimãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

### 4. Rails 8.x å¯¾å¿œã®å¼·åŒ–

CI ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã« Rails 8.0 / 8.1 ãŒè¿½åŠ ã•ã‚Œã€æœ€æ–°ã® Rails ã¨ã®äº’æ›æ€§ãŒä¿è¨¼ã•ã‚Œã¦ã„ã‚‹ã€‚

## ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

```
Ruby 3.0ä»¥ä¸Šã‚’ä½¿ã£ã¦ã„ã‚‹ï¼Ÿ
â”œâ”€â”€ Yes â†’ Rails 7.0ä»¥ä¸Šã‚’ä½¿ã£ã¦ã„ã‚‹ï¼Ÿ
â”‚          â”œâ”€â”€ Yes â†’ ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰OKï¼
â”‚          â””â”€â”€ No  â†’ Rails ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã‹ã€slim-rails 3.7.0 ã«å›ºå®š
â”‚
â””â”€â”€ No  â†’ Ruby ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã‹ã€slim-rails 3.7.0 ã«å›ºå®š
```

## å®Ÿéš›ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹

### ãƒ¢ãƒ€ãƒ³ãªç’°å¢ƒã®å ´åˆ

ç‰¹ã«ä½•ã‚‚ã›ãšã€ãã®ã¾ã¾ `bundle update slim-rails` ã§OKã€‚

```bash
bundle update slim-rails
```

### å¤ã„ç’°å¢ƒã§å›ºå®šã™ã‚‹å ´åˆ

```ruby
# Gemfile
gem 'slim-rails', '~> 3.7.0'
```

```bash
bundle install
```

## ã¾ã¨ã‚

slim-rails 4.0.0 ã®å¤‰æ›´ã¯ä»¥ä¸‹ã®é€šã‚Šï¼š

| å¤‰æ›´å†…å®¹ | å½±éŸ¿ |
|---------|------|
| Ruby 2.7 ã‚µãƒãƒ¼ãƒˆçµ‚äº† | Ruby 3.0+ ãªã‚‰å½±éŸ¿ãªã— |
| Rails 6 ä»¥ä¸‹ã‚µãƒãƒ¼ãƒˆçµ‚äº† | Rails 7.0+ ãªã‚‰å½±éŸ¿ãªã— |
| Rails Annotations å¯¾å¿œ | `rake notes` ã§ Slim å†…ã® TODO ç­‰ãŒæ¤œå‡ºå¯èƒ½ã« |
| CodeStatistics å¯¾å¿œ | `rake stats` ã« Slim ãŒã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ |
| Rails 8.x å¯¾å¿œå¼·åŒ– | æœ€æ–° Rails ã§ã‚‚å®‰å¿ƒ |

**ãƒ¢ãƒ€ãƒ³ãªç’°å¢ƒï¼ˆRuby 3.x + Rails 7/8ï¼‰ã‚’ä½¿ã£ã¦ã„ã‚‹ãªã‚‰ã€ç©æ¥µçš„ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦å•é¡Œãªã„**ã€‚ã‚€ã—ã‚ã€Rails ã®æ¨™æº–ãƒ„ãƒ¼ãƒ«ã¨ã®çµ±åˆãŒå¼·åŒ–ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€é–‹ç™ºä½“é¨“ãŒå‘ä¸Šã™ã‚‹ã€‚

å¤ã„ç’°å¢ƒã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€slim-rails ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å¥‘æ©Ÿã«ã€Ruby/Rails è‡ªä½“ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’æ¤œè¨ã—ã¦ã¿ã¦ã¯ã©ã†ã ã‚ã†ã‹ã€‚

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [slim-rails GitHub](https://github.com/slim-template/slim-rails)
- [slim-rails CHANGELOG](https://github.com/slim-template/slim-rails/blob/master/CHANGELOG.md)
- [Slim Template Language](https://slim-template.github.io/)
